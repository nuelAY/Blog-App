(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{1458:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var r=a(5155),l=a(2115),o=a(5695),s=a(6408),i=a(8795),n=a(2523),d=a(9434);function c(e){let{className:t,...a}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,d.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}var u=a(5057),g=a(2017),h=a(5095),p=a(8543);function x(){let[e,t]=(0,l.useState)(""),[a,d]=(0,l.useState)(""),[x,m]=(0,l.useState)("Tech"),[b,f]=(0,l.useState)(null),{user:v}=(0,g.G)(e=>e.auth),y=(0,g.j)(),j=(0,o.useRouter)(),w=async t=>{if(t.preventDefault(),!e||!a)return p.oR.error("Title and content are required.");let r=new FormData;r.append("title",e),r.append("content",a),r.append("category",x),b&&r.append("image",b);try{let e=await y((0,h.$5)(r));console.log(e),h.$5.fulfilled.match(e)?(p.oR.success("Post created successfully!"),console.log("posted"),j.push("/Posts")):p.oR.error(e.payload||"Failed to create post.")}catch(e){p.oR.error("An unexpected error occurred.")}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{}),(0,r.jsxs)("main",{className:"pt-28 min-h-screen bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white px-6 pb-10 flex flex-col items-center",children:[(0,r.jsx)(s.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl text-gray-900 font-bold mb-2",children:"Create a New Post"}),(0,r.jsxs)("p",{className:"text-sm text-white mb-6",children:["Posting as"," ",(0,r.jsx)("span",{className:"font-semibold text-yellow-200",children:(null==v?void 0:v.name)||"Guest"})]}),(0,r.jsxs)("form",{onSubmit:w,className:"w-full max-w-2xl bg-white/20 rounded-lg p-8 shadow-md space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(u.J,{htmlFor:"title",className:"text-gray-700 font-semibold mb-1 block",children:"Title"}),(0,r.jsx)(n.p,{id:"title",type:"text",placeholder:"Post Title",value:e,onChange:e=>t(e.target.value),required:!0,className:"text-black"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(u.J,{htmlFor:"body",className:"text-gray-700 font-semibold mb-1 block",children:"Content"}),(0,r.jsx)(c,{id:"body",placeholder:"Write your post content here...",value:a,onChange:e=>d(e.target.value),required:!0,rows:8,className:"text-black"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(u.J,{htmlFor:"category",className:"text-gray-700 font-semibold mb-1 block",children:"Category"}),(0,r.jsxs)("select",{id:"category",value:x,onChange:e=>m(e.target.value),className:"w-full p-2 rounded-md bg-transparent text-black border border-white/50",children:[(0,r.jsx)("option",{value:"Tech",children:"Tech"}),(0,r.jsx)("option",{value:"Lifestyle",children:"Lifestyle"}),(0,r.jsx)("option",{value:"Design",children:"Design"}),(0,r.jsx)("option",{value:"Career",children:"Career"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(u.J,{htmlFor:"image",className:"text-gray-700 font-semibold mb-1 block",children:"Cover Image"}),(0,r.jsx)(n.p,{id:"image",type:"file",onChange:e=>{var t,a;return f(null!=(a=null==(t=e.target.files)?void 0:t[0])?a:null)},className:"bg-transparent"}),b&&(0,r.jsxs)("p",{className:"text-sm mt-2 text-white",children:["Selected: ",b.name]})]}),(0,r.jsx)(s.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"bg-gradient-to-br from-indigo-600 to-purple-600 text-gray-700 font-semibold px-6 py-3 rounded-lg w-full",children:"Publish Post"})]})]})]})}},2017:(e,t,a)=>{"use strict";a.d(t,{G:()=>o,j:()=>l});var r=a(4540);let l=r.wA,o=r.d4},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>o});var r=a(5155);a(2115);var l=a(9434);function o(e){let{className:t,type:a,...o}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...o})}},5057:(e,t,a)=>{"use strict";a.d(t,{J:()=>s});var r=a(5155);a(2115);var l=a(7073),o=a(9434);function s(e){let{className:t,...a}=e;return(0,r.jsx)(l.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},5095:(e,t,a)=>{"use strict";a.d(t,{$5:()=>i,$y:()=>o,Ay:()=>c,cc:()=>d});var r=a(1990),l=a(3464);let o=(0,r.zD)("blogs/fetchAll",async(e,t)=>{try{return(await l.A.get("http://localhost:5000/api/blogs")).data}catch(e){var a,r;return t.rejectWithValue((null==(r=e.response)||null==(a=r.data)?void 0:a.message)||"Failed to fetch blogs")}}),s=(0,r.zD)("blogs/fetchById",async(e,t)=>{try{return(await l.A.get("http://localhost:5000/api/blogs/".concat(e))).data}catch(e){var a,r;return t.rejectWithValue((null==(r=e.response)||null==(a=r.data)?void 0:a.message)||"Failed to fetch blog")}}),i=(0,r.zD)("blogs/create",async(e,t)=>{var a,r,o;try{let r=null==(a=t.getState().auth.user)?void 0:a.token;console.log("Token being sent:",r);let o=await l.A.post("http://localhost:5000/api/blogs",e,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}});return console.log("response:",o),o.data}catch(e){return t.rejectWithValue((null==(o=e.response)||null==(r=o.data)?void 0:r.message)||"Failed to create blog")}}),n=(0,r.zD)("blogs/update",async(e,t)=>{var a,r,o;let{id:s,data:i}=e;try{let e=null==(a=t.getState().auth.user)?void 0:a.token;return(await l.A.put("http://localhost:5000/api/blogs/".concat(s),i,{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){return t.rejectWithValue((null==(o=e.response)||null==(r=o.data)?void 0:r.message)||"Failed to update blog")}}),d=(0,r.zD)("blogs/delete",async(e,t)=>{var a,r,o;try{let r=null==(a=t.getState().auth.user)?void 0:a.token;if(!r)return t.rejectWithValue("No token found. Please log in again.");return await l.A.delete("http://localhost:5000/api/blogs/".concat(e),{headers:{Authorization:"Bearer ".concat(r)}}),e}catch(e){return t.rejectWithValue((null==(o=e.response)||null==(r=o.data)?void 0:r.message)||"Failed to delete blog")}}),c=(0,r.Z0)({name:"blogs",initialState:{blogs:[],selectedBlog:null,loading:!1,error:null,token:null},reducers:{},extraReducers:e=>{e.addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.blogs=t.payload}).addCase(o.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.selectedBlog=t.payload}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{console.log("action:",t),e.loading=!1,e.blogs.unshift(t.payload),e.token=t.payload.token}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(n.fulfilled,(e,t)=>{let a=e.blogs.findIndex(e=>e._id===t.payload._id);-1!==a&&(e.blogs[a]=t.payload)}).addCase(d.fulfilled,(e,t)=>{e.blogs=e.blogs.filter(e=>e._id!==t.payload)})}}).reducer},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},7073:(e,t,a)=>{"use strict";a.d(t,{b:()=>n});var r=a(2115);a(7650);var l=a(4624),o=a(5155),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,l.TL)(`Primitive.${t}`),s=r.forwardRef((e,r)=>{let{asChild:l,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(l?a:t,{...s,ref:r})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),i=r.forwardRef((e,t)=>(0,o.jsx)(s.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var n=i},8795:(e,t,a)=>{"use strict";a.d(t,{A:()=>g});var r=a(5155),l=a(6874),o=a.n(l),s=a(2115),i=a(6408),n=a(760),d=a(6766),c=a(4416),u=a(4783);function g(){let[e,t]=(0,s.useState)(!1),a=()=>{localStorage.removeItem("token"),t(!1),window.location.href="/"};return(0,r.jsxs)(i.P.nav,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},className:"fixed top-4 left-1/2 -translate-x-1/2 z-50 w-[95%] md:w-[90%] lg:w-[80%] bg-white/60 backdrop-blur-xl border border-white/30 rounded-2xl shadow-xl px-6 py-3 flex items-center justify-between",children:[(0,r.jsx)(o(),{href:"/",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.default,{src:"/images/Logo.jpg",alt:"Logo",width:60,height:60,className:"rounded-full"}),(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900 cursor-pointer",children:"BLOG"})]})}),(0,r.jsxs)("div",{className:"hidden md:flex items-center gap-6",children:[(0,r.jsx)(o(),{href:"/Posts",className:"text-gray-700 hover:text-indigo-600 font-medium",children:"Posts"}),(0,r.jsx)(o(),{href:"/CreatePosts",className:"text-gray-700 hover:text-indigo-600 font-medium",children:"Create Post"}),(0,r.jsx)(o(),{href:"/About",className:"text-gray-700 hover:text-indigo-600 font-medium",children:"About"}),(0,r.jsx)("button",{onClick:a,className:"text-red-600 border border-red-600 hover:bg-red-600 hover:text-white font-medium px-4 py-1.5 rounded-lg transition-colors duration-200",children:"Logout"})]}),(0,r.jsx)("button",{onClick:()=>t(!e),className:"md:hidden text-gray-800",children:e?(0,r.jsx)(c.A,{size:24}):(0,r.jsx)(u.A,{size:24})}),(0,r.jsx)(n.N,{children:e&&(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-16 left-0 w-full bg-white/70 backdrop-blur-xl border border-white/20 rounded-xl shadow-md px-6 py-4 flex flex-col gap-4 md:hidden",children:[(0,r.jsx)(o(),{href:"/Posts",onClick:()=>t(!1),className:"text-gray-800 font-medium",children:"Posts"}),(0,r.jsx)(o(),{href:"/CreatePosts",onClick:()=>t(!1),className:"text-gray-800 font-medium",children:"Create Post"}),(0,r.jsx)(o(),{href:"/About",onClick:()=>t(!1),className:"text-gray-800 font-medium",children:"About"}),(0,r.jsx)("button",{onClick:a,className:"text-red-600 border border-red-600 hover:bg-red-600 hover:text-white font-medium px-4 py-1.5 rounded-lg transition-colors duration-200",children:"Logout"})]})})]})}},9263:(e,t,a)=>{Promise.resolve().then(a.bind(a,1458))},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>o});var r=a(2596),l=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[408,635,460,162,464,299,543,441,684,358],()=>t(9263)),_N_E=e.O()}]);