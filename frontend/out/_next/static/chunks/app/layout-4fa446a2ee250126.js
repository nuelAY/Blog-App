(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1401:(e,a,t)=>{Promise.resolve().then(t.bind(t,5504))},2093:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},5095:(e,a,t)=>{"use strict";t.d(a,{$5:()=>s,$y:()=>r,Ay:()=>c,cc:()=>i});var l=t(1990),o=t(3464);let r=(0,l.zD)("blogs/fetchAll",async(e,a)=>{try{return(await o.A.get("http://localhost:5000/api/blogs")).data}catch(e){var t,l;return a.rejectWithValue((null==(l=e.response)||null==(t=l.data)?void 0:t.message)||"Failed to fetch blogs")}}),n=(0,l.zD)("blogs/fetchById",async(e,a)=>{try{return(await o.A.get("http://localhost:5000/api/blogs/".concat(e))).data}catch(e){var t,l;return a.rejectWithValue((null==(l=e.response)||null==(t=l.data)?void 0:t.message)||"Failed to fetch blog")}}),s=(0,l.zD)("blogs/create",async(e,a)=>{var t,l,r;try{let l=null==(t=a.getState().auth.user)?void 0:t.token;console.log("Token being sent:",l);let r=await o.A.post("http://localhost:5000/api/blogs",e,{headers:{Authorization:"Bearer ".concat(l),"Content-Type":"multipart/form-data"}});return console.log("response:",r),r.data}catch(e){return a.rejectWithValue((null==(r=e.response)||null==(l=r.data)?void 0:l.message)||"Failed to create blog")}}),d=(0,l.zD)("blogs/update",async(e,a)=>{var t,l,r;let{id:n,data:s}=e;try{let e=null==(t=a.getState().auth.user)?void 0:t.token;return(await o.A.put("http://localhost:5000/api/blogs/".concat(n),s,{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){return a.rejectWithValue((null==(r=e.response)||null==(l=r.data)?void 0:l.message)||"Failed to update blog")}}),i=(0,l.zD)("blogs/delete",async(e,a)=>{var t,l,r;try{let l=null==(t=a.getState().auth.user)?void 0:t.token;if(!l)return a.rejectWithValue("No token found. Please log in again.");return await o.A.delete("http://localhost:5000/api/blogs/".concat(e),{headers:{Authorization:"Bearer ".concat(l)}}),e}catch(e){return a.rejectWithValue((null==(r=e.response)||null==(l=r.data)?void 0:l.message)||"Failed to delete blog")}}),c=(0,l.Z0)({name:"blogs",initialState:{blogs:[],selectedBlog:null,loading:!1,error:null,token:null},reducers:{},extraReducers:e=>{e.addCase(r.pending,e=>{e.loading=!0,e.error=null}).addCase(r.fulfilled,(e,a)=>{e.loading=!1,e.blogs=a.payload}).addCase(r.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.loading=!1,e.selectedBlog=a.payload}).addCase(n.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,a)=>{console.log("action:",a),e.loading=!1,e.blogs.unshift(a.payload),e.token=a.payload.token}).addCase(s.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(d.fulfilled,(e,a)=>{let t=e.blogs.findIndex(e=>e._id===a.payload._id);-1!==t&&(e.blogs[t]=a.payload)}).addCase(i.fulfilled,(e,a)=>{e.blogs=e.blogs.filter(e=>e._id!==a.payload)})}}).reducer},5119:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>d,DY:()=>o,Lx:()=>r});var l=t(1990);let o=(0,l.zD)("auth/registerUser",async(e,a)=>{let{name:t,email:l,password:o}=e;try{let e=await fetch("http://localhost:5000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:l,password:o})});if(!e.ok)throw Error("Registration failed");return await e.json()}catch(e){return a.rejectWithValue(e.message)}}),r=(0,l.zD)("auth/loginUser",async(e,a)=>{let{email:t,password:l}=e;try{let e=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:l})});if(!e.ok)throw Error("Login failed");return await e.json()}catch(e){return a.rejectWithValue(e.message)}}),n=(0,l.Z0)({name:"auth",initialState:{user:null,loading:!1,error:null,token:null},reducers:{logout:e=>{e.user=null,e.token=null}},extraReducers:e=>{e.addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,a)=>{console.log("action:",a),e.loading=!1,e.user=a.payload,localStorage.setItem("user",JSON.stringify(a.payload)),e.token=a.payload.token}).addCase(o.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(r.pending,e=>{e.loading=!0,e.error=null}).addCase(r.fulfilled,(e,a)=>{console.log("action:",a),e.loading=!1,e.user=a.payload,localStorage.setItem("user",JSON.stringify(a.payload)),e.token=a.payload.token}).addCase(r.rejected,(e,a)=>{e.loading=!1,e.error=a.payload})}}),{logout:s}=n.actions,d=n.reducer},5504:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var l=t(5155),o=t(2093),r=t.n(o),n=t(7735),s=t.n(n),d=t(4540),i=t(1990),c=t(5119),u=t(5095);let g=(0,i.U1)({reducer:{auth:c.Ay,blogs:u.Ay}});function h(e){let{children:a}=e;return(0,l.jsx)("html",{lang:"en",children:(0,l.jsx)("body",{className:"".concat(r().variable," ").concat(s().variable," antialiased"),children:(0,l.jsx)(d.Kq,{store:g,children:a})})})}t(347)},7735:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}}},e=>{var a=a=>e(e.s=a);e.O(0,[360,635,464,441,684,358],()=>a(1401)),_N_E=e.O()}]);